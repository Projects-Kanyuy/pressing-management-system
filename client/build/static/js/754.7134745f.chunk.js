/*! For license information please see 754.7134745f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[754],{737:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])},754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var s=a(5043),r=a(4117),l=a(5016),i=a(9621),p=a(6260),n=a(3280),o=a(722),d=a(7457),c=a(4651),x=a(5087),m=a(8706),u=a(7784);const y=(0,u.A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var f=a(737),g=a(6833),h=a(4596);const v=(0,u.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),j=(0,u.A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var w=a(7719),b=a(8693),N=a(3308),k=a(579);const A=e=>{let{label:t,value:a,icon:s,children:r,t:l}=e;return(0,k.jsxs)("div",{className:"py-3 sm:grid sm:grid-cols-3 sm:gap-4 px-4 sm:px-6",children:[(0,k.jsxs)("dt",{className:"text-sm font-medium text-apple-gray-500 dark:text-apple-gray-400 flex items-center",children:[s&&(0,k.jsx)(s,{size:16,className:"mr-2 text-apple-gray-400 dark:text-apple-gray-500"}),t]}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-apple-gray-900 dark:text-apple-gray-100 sm:mt-0 sm:col-span-2",children:r||a||(0,k.jsx)("span",{className:"italic text-apple-gray-400 dark:text-apple-gray-500",children:l("profile.notSet")})})]})},C=e=>{let{show:t,toggle:a}=e;return(0,k.jsx)("span",{onClick:a,className:"cursor-pointer text-apple-gray-400 hover:text-apple-gray-600 dark:hover:text-apple-gray-200",children:t?(0,k.jsx)(c.A,{size:18}):(0,k.jsx)(x.A,{size:18})})},P=()=>{var e,t;const{t:a}=(0,r.Bd)(),{user:c,updateUserInContext:x,loading:u}=(0,l.A)(),[P,z]=(0,s.useState)(""),[S,L]=(0,s.useState)(!1),[M,U]=(0,s.useState)(!1),[$,q]=(0,s.useState)({type:"",text:""}),[D,I]=(0,s.useState)(null),[F,T]=(0,s.useState)(""),[V,R]=(0,s.useState)(!1),[E,H]=(0,s.useState)({type:"",text:""}),O=(0,s.useRef)(null),[B,G]=(0,s.useState)(1),[J,K]=(0,s.useState)({currentPassword:"",newPassword:"",confirmNewPassword:""}),[Q,W]=(0,s.useState)(""),[X,Y]=(0,s.useState)(!1),[Z,_]=(0,s.useState)({type:"",text:""}),[ee,te]=(0,s.useState)(!1),[ae,se]=(0,s.useState)(!1);(0,s.useEffect)(()=>{c&&(z(c.username||""),T(c.profilePictureUrl||""))},[c]),(0,s.useEffect)(()=>{let e;return($.text||E.text||Z.text)&&(e=setTimeout(()=>{q({type:"",text:""}),H({type:"",text:""}),_({type:"",text:""})},5e3)),()=>clearTimeout(e)},[$,E,Z]);const re=e=>{K(t=>({...t,[e.target.name]:e.target.value}))};return u&&!c?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)(d.A,{size:"lg"})}):c?(0,k.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8 pb-12",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4 pt-2",children:[(0,k.jsxs)("div",{className:"relative group",children:[F?(0,k.jsx)("img",{src:F,alt:c.username,className:"h-24 w-24 rounded-full object-cover border-4 border-white dark:border-apple-gray-700 shadow-md"}):(0,k.jsx)(m.A,{size:96,className:"text-apple-gray-300 dark:text-apple-gray-600"}),(0,k.jsx)("button",{type:"button",className:"absolute bottom-1 right-1 bg-apple-gray-600 hover:bg-apple-gray-700 text-white p-2 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},"aria-label":a("profile.changeProfilePicture"),children:(0,k.jsx)(y,{size:16})}),(0,k.jsx)("input",{type:"file",ref:O,onChange:e=>{const t=e.target.files[0];t&&(t.size>2097152?H({type:"error",text:a("profile.fileTooLarge")}):["image/jpeg","image/png","image/gif"].includes(t.type)?(H({type:"",text:""}),I(t),T(URL.createObjectURL(t))):H({type:"error",text:a("profile.invalidFileType")}))},accept:"image/png, image/jpeg, image/gif",className:"hidden"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-semibold text-apple-gray-800 dark:text-apple-gray-100",children:c.username}),(0,k.jsx)("p",{className:"text-md text-apple-gray-500 dark:text-apple-gray-400 capitalize",children:c.role})]})]}),D&&!V&&(0,k.jsxs)("div",{className:"flex items-center justify-start gap-x-3 -mt-4 ml-28",children:[(0,k.jsx)(o.A,{onClick:async()=>{if(!D)return void H({type:"error",text:a("profile.selectImageFile")});R(!0),H({type:"",text:""});const e=new FormData;e.append("profilePicture",D);try{const{data:t}=await(0,i.Bj)(e);t&&t.profilePictureUrl?(x({profilePictureUrl:t.profilePictureUrl}),T(t.profilePictureUrl),I(null),O.current&&(O.current.value=""),H({type:"success",text:t.message||a("profile.pictureUpdated")})):H({type:"error",text:(null===t||void 0===t?void 0:t.message)||a("profile.unexpectedResponse")})}catch(r){var t,s;H({type:"error",text:(null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||a("profile.pictureUploadFailed")})}finally{R(!1)}},iconLeft:(0,k.jsx)(f.A,{size:16}),variant:"primary",size:"sm",children:a("profile.upload")}),(0,k.jsx)(o.A,{onClick:()=>{I(null),T(c.profilePictureUrl||""),O.current&&(O.current.value="")},variant:"secondary",size:"sm",children:a("profile.cancel")})]}),V&&(0,k.jsxs)("div",{className:"-mt-4 ml-28 text-sm text-apple-gray-500 flex items-center",children:[(0,k.jsx)(d.A,{size:"sm",className:"inline mr-2"}),a("profile.uploading")]}),E.text&&(0,k.jsxs)("p",{className:"my-2 text-sm text-center flex items-center justify-center "+("success"===E.type?"text-apple-green":"text-apple-red"),children:[(0,k.jsx)(g.A,{size:16,className:"mr-1"})," ",E.text]}),(0,k.jsxs)(p.A,{title:a("profile.accountInformation"),contentClassName:"p-0 divide-y divide-apple-gray-100 dark:divide-apple-gray-800",actions:!S&&(0,k.jsx)(o.A,{variant:"ghost",size:"sm",onClick:()=>{L(!0),q({type:"",text:""})},iconLeft:(0,k.jsx)(h.A,{size:16}),children:a("profile.edit")}),children:[$.text&&!S&&(0,k.jsxs)("div",{className:`p-3 text-sm ${"success"===$.type?"bg-green-100 text-apple-green":"bg-red-100 text-apple-red"} rounded-apple flex items-center`,children:[(0,k.jsx)(g.A,{size:18,className:"mr-2"}),$.text]}),S?(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!P.trim()||P.trim()===c.username)return L(!1),void q({type:"",text:""});U(!0),q({type:"",text:""});try{const{data:e}=await(0,i.L6)({username:P.trim()});x(e),q({type:"success",text:a("profile.profileUpdated")}),L(!1)}catch(r){var t,s;q({type:"error",text:(null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||a("profile.profileUpdateFailed")})}finally{U(!1)}},className:"space-y-4 p-4 sm:p-6",children:[$.text&&S&&(0,k.jsxs)("div",{className:`p-3 mb-4 text-sm ${"error"===$.type?"bg-red-100 text-apple-red":""} rounded-apple flex items-center`,children:[(0,k.jsx)(w.A,{size:18,className:"mr-2"}),$.text]}),(0,k.jsx)(n.A,{label:a("profile.username"),id:"username",name:"username",value:P,onChange:e=>z(e.target.value),required:!0}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,k.jsx)(o.A,{type:"button",variant:"secondary",onClick:()=>{L(!1),q({type:"",text:""}),z(c.username)},children:a("profile.cancel")}),(0,k.jsx)(o.A,{type:"submit",variant:"primary",isLoading:M,iconLeft:(0,k.jsx)(b.A,{size:16}),children:a("profile.saveProfile")})]})]}):(0,k.jsxs)("dl",{children:[(0,k.jsx)(A,{label:a("profile.username"),value:c.username,icon:m.A,t:a}),(0,k.jsx)(A,{label:a("profile.role"),value:(null===(e=c.role)||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===(t=c.role)||void 0===t?void 0:t.slice(1)),icon:"admin"===c.role?v:j,t:a})]})]}),(0,k.jsxs)(p.A,{title:a("profile.changePassword"),contentClassName:"p-4 sm:p-6",children:[Z.text&&(0,k.jsxs)("div",{className:`p-3 mb-4 text-sm ${"success"===Z.type?"bg-green-100 text-apple-green":"bg-red-100 text-apple-red"} rounded-apple flex items-center`,children:[(0,k.jsx)(g.A,{size:18,className:"mr-2"}),Z.text]}),1===B&&(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),_({type:"",text:""}),J.newPassword===J.confirmNewPassword)if(J.newPassword.length<6)_({type:"error",text:a("profile.passwordTooShort")});else{Y(!0);try{const{data:e}=await(0,i.yO)({currentPassword:J.currentPassword});_({type:"success",text:e.message||a("profile.verificationCodeSent")}),G(2)}catch(r){var t,s;_({type:"error",text:(null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||a("profile.failedToRequestOtp")})}finally{Y(!1)}}else _({type:"error",text:a("profile.passwordsDoNotMatch")})},className:"space-y-4 py-2",children:[(0,k.jsx)(n.A,{label:a("profile.currentPassword"),id:"currentPassword",name:"currentPassword",type:ee?"text":"password",value:J.currentPassword,onChange:re,required:!0,autoComplete:"current-password",suffixIcon:(0,k.jsx)(C,{show:ee,toggle:()=>te(!ee)})}),(0,k.jsx)(n.A,{label:a("profile.newPassword"),id:"newPassword",name:"newPassword",type:ae?"text":"password",value:J.newPassword,onChange:re,required:!0,autoComplete:"new-password",minLength:6,suffixIcon:(0,k.jsx)(C,{show:ae,toggle:()=>se(!ae)})}),(0,k.jsx)(n.A,{label:a("profile.confirmNewPassword"),id:"confirmNewPassword",name:"confirmNewPassword",type:ae?"text":"password",value:J.confirmNewPassword,onChange:re,required:!0,autoComplete:"new-password",minLength:6}),(0,k.jsxs)("div",{className:"flex justify-end pt-2",children:[" ",(0,k.jsxs)(o.A,{type:"submit",variant:"primary",isLoading:X,iconLeft:(0,k.jsx)(N.A,{size:16}),children:[" ",a("profile.sendVerificationCode")," "]})," "]})]}),2===B&&(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),_({type:"",text:""}),Q&&6===Q.length){Y(!0);try{const{data:e}=await(0,i.un)({otp:Q,newPassword:J.newPassword});_({type:"success",text:e.message||a("profile.passwordChangedSuccessfully")}),G(1),K({currentPassword:"",newPassword:"",confirmNewPassword:""}),W("")}catch(r){var t,s;_({type:"error",text:(null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||a("profile.verificationFailed")})}finally{Y(!1)}}else _({type:"error",text:a("profile.enterSixDigitCode")})},className:"space-y-4 py-2",children:[(0,k.jsx)("p",{className:"text-sm text-apple-gray-500 dark:text-apple-gray-400",children:a("profile.verificationCodeInstruction")}),(0,k.jsx)(n.A,{label:a("profile.sixDigitVerificationCode"),id:"otp",name:"otp",value:Q,onChange:e=>W(e.target.value),required:!0,maxLength:6}),(0,k.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,k.jsx)(o.A,{type:"button",variant:"secondary",onClick:()=>G(1),disabled:X,children:a("profile.back")}),(0,k.jsx)(o.A,{type:"submit",variant:"primary",isLoading:X,iconLeft:(0,k.jsx)(g.A,{size:16}),children:a("profile.confirmAndChangePassword")})]})]})]})]}):(0,k.jsx)("div",{className:"text-center p-6",children:a("profile.userDataNotAvailable")})}},3280:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(5043),r=a(579);const l=e=>{let{label:t,id:a,type:l="text",value:i,onChange:p,placeholder:n,error:o,required:d,className:c="",inputClassName:x="",disabled:m=!1,prefix:u,prefixIcon:y,suffixIcon:f,helperText:g,containerStyle:h,...v}=e;return(0,r.jsxs)("div",{className:`mb-4 ${c}`,style:h,children:[t&&(0,r.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-apple-gray-700 dark:text-apple-gray-300 mb-1",children:t}),(0,r.jsxs)("div",{className:"relative rounded-apple shadow-apple-sm",children:[u&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-apple-gray-500 sm:text-sm",children:u})}),y&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.cloneElement(y,{className:"h-5 w-5 text-apple-gray-500 dark:text-apple-gray-400"})}),(0,r.jsx)("input",{type:l,id:a,name:a||v.name,value:null===i||void 0===i?"":i,onChange:p,placeholder:n,required:d,disabled:m,className:`\n                        form-input block w-full sm:text-sm\n                        border-apple-gray-300 focus:border-apple-blue focus:ring-apple-blue\n                        dark:bg-apple-gray-800 dark:border-apple-gray-700 dark:text-apple-gray-100\n                        dark:placeholder-apple-gray-500 dark:focus:border-apple-blue\n                        rounded-apple shadow-apple-sm\n                        ${o?"border-apple-red focus:border-apple-red focus:ring-apple-red":""}\n                        ${u||y?"pl-10":"px-3"}\n                        ${f?"pr-10":"px-3"}\n                        ${x}\n                    `.trim().replace(/\s+/g," "),...v}),f&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:f})]}),o&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-apple-red",children:o}),g&&!o&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-apple-gray-500 dark:text-apple-gray-400",children:g})]})}},4596:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},4651:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5087:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6260:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var s=a(579);const r=e=>{let{children:t,className:a="",title:r,actions:l,titleClassName:i="",contentClassName:p="",actionsClassName:n=""}=e;return(0,s.jsxs)("div",{className:`bg-white dark:bg-apple-gray-900 rounded-apple-lg shadow-apple overflow-hidden ${a}`,children:[r&&(0,s.jsx)("div",{className:`px-4 py-4 sm:px-6 border-b border-apple-gray-200 dark:border-apple-gray-800 ${i}`,children:"string"===typeof r?(0,s.jsx)("h3",{className:"text-lg leading-6 font-semibold text-apple-gray-900 dark:text-apple-gray-100",children:r}):r}),(0,s.jsx)("div",{className:`p-4 sm:p-6 ${p}`,children:t}),l&&(0,s.jsx)("div",{className:`px-4 py-3 sm:px-6 bg-apple-gray-50 dark:bg-apple-gray-950/50 border-t border-apple-gray-200 dark:border-apple-gray-800 ${n}`,children:l})]})}},6833:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8693:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(7784).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}}]);
//# sourceMappingURL=754.7134745f.chunk.js.map