/*! For license information please see 930.94701377.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[930],{3280:(e,a,s)=>{s.d(a,{A:()=>l});var t=s(5043),r=s(579);const l=e=>{let{label:a,id:s,type:l="text",value:c,onChange:p,placeholder:d,error:n,required:i,className:o="",inputClassName:m="",disabled:x=!1,prefix:g,prefixIcon:u,suffixIcon:h,helperText:y,containerStyle:b,...v}=e;return(0,r.jsxs)("div",{className:`mb-4 ${o}`,style:b,children:[a&&(0,r.jsx)("label",{htmlFor:s,className:"block text-sm font-medium text-apple-gray-700 dark:text-apple-gray-300 mb-1",children:a}),(0,r.jsxs)("div",{className:"relative rounded-apple shadow-apple-sm",children:[g&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("span",{className:"text-apple-gray-500 sm:text-sm",children:g})}),u&&(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.cloneElement(u,{className:"h-5 w-5 text-apple-gray-500 dark:text-apple-gray-400"})}),(0,r.jsx)("input",{type:l,id:s,name:s||v.name,value:null===c||void 0===c?"":c,onChange:p,placeholder:d,required:i,disabled:x,className:`\n                        form-input block w-full sm:text-sm\n                        border-apple-gray-300 focus:border-apple-blue focus:ring-apple-blue\n                        dark:bg-apple-gray-800 dark:border-apple-gray-700 dark:text-apple-gray-100\n                        dark:placeholder-apple-gray-500 dark:focus:border-apple-blue\n                        rounded-apple shadow-apple-sm\n                        ${n?"border-apple-red focus:border-apple-red focus:ring-apple-red":""}\n                        ${g||u?"pl-10":"px-3"}\n                        ${h?"pr-10":"px-3"}\n                        ${m}\n                    `.trim().replace(/\s+/g," "),...v}),h&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:h})]}),n&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-apple-red",children:n}),y&&!n&&(0,r.jsx)("p",{className:"mt-1.5 text-xs text-apple-gray-500 dark:text-apple-gray-400",children:y})]})}},4596:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},5087:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6260:(e,a,s)=>{s.d(a,{A:()=>r});s(5043);var t=s(579);const r=e=>{let{children:a,className:s="",title:r,actions:l,titleClassName:c="",contentClassName:p="",actionsClassName:d=""}=e;return(0,t.jsxs)("div",{className:`bg-white dark:bg-apple-gray-900 rounded-apple-lg shadow-apple overflow-hidden ${s}`,children:[r&&(0,t.jsx)("div",{className:`px-4 py-4 sm:px-6 border-b border-apple-gray-200 dark:border-apple-gray-800 ${c}`,children:"string"===typeof r?(0,t.jsx)("h3",{className:"text-lg leading-6 font-semibold text-apple-gray-900 dark:text-apple-gray-100",children:r}):r}),(0,t.jsx)("div",{className:`p-4 sm:p-6 ${p}`,children:a}),l&&(0,t.jsx)("div",{className:`px-4 py-3 sm:px-6 bg-apple-gray-50 dark:bg-apple-gray-950/50 border-t border-apple-gray-200 dark:border-apple-gray-800 ${d}`,children:l})]})}},6833:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9292:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9855:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9930:(e,a,s)=>{s.r(a),s.d(a,{default:()=>N});var t=s(5043),r=s(1283),l=s(4117),c=s(9621),p=s(6260),d=s(722),n=s(3280),i=s(7457),o=s(5016),m=s(7118),x=s(781),g=s(9292),u=s(6833),h=s(7719),y=s(5087),b=s(4596),v=s(9855),j=s(579);const N=()=>{const{t:e}=(0,l.Bd)(),{user:a}=(0,o.A)(),[s,N]=(0,t.useState)([]),[k,f]=(0,t.useState)(!0),[w,A]=(0,t.useState)(""),[C,P]=(0,t.useState)(""),[z,S]=(0,t.useState)(""),[$,_]=(0,t.useState)(""),[T,F]=(0,t.useState)(""),[M,E]=(0,t.useState)({currentPage:1,totalPages:1,totalCustomers:0}),I=(0,t.useCallback)(async(a,s)=>{f(!0),A("");try{const e={search:a,page:s,pageSize:10},{data:t}=await(0,c.gn)(e);t&&Array.isArray(t.customers)?(N(t.customers),E({currentPage:t.page||1,totalPages:t.pages||1,totalCustomers:t.totalCustomers||0})):(console.warn("CustomerListPage: Unexpected data structure from API.",t),N([]),E({currentPage:1,totalPages:1,totalCustomers:0}))}catch(l){var t,r;const a=(null===(t=l.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||l.message||e("customers.messages.failedToFetch");A(a),console.error("CustomerListPage: Fetch Customers Error:",l)}finally{f(!1)}},[]);(0,t.useEffect)(()=>{const e=setTimeout(()=>{F($)},500);return()=>clearTimeout(e)},[$]),(0,t.useEffect)(()=>{I(T,M.currentPage)},[T,M.currentPage,I]),(0,t.useEffect)(()=>{let e;return(C||z)&&(e=setTimeout(()=>{P(""),S("")},4e3)),()=>clearTimeout(e)},[C,z]);const L=e=>{e>=1&&e<=M.totalPages&&e!==M.currentPage&&!k&&E(a=>({...a,currentPage:e}))};return(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,j.jsx)(m.A,{size:28,className:"text-apple-blue"}),(0,j.jsx)("h1",{className:"text-2xl sm:text-3xl font-semibold",children:e("customers.title")})]}),(0,j.jsx)(r.N_,{to:"/app/customers/new",children:(0,j.jsx)(d.A,{variant:"primary",iconLeft:(0,j.jsx)(x.A,{size:18}),children:e("customers.addNewCustomer")})})]}),(0,j.jsxs)(p.A,{children:[(0,j.jsx)("div",{className:"p-4 border-b border-apple-gray-200 dark:border-apple-gray-700",children:(0,j.jsx)(n.A,{id:"customerSearch",placeholder:e("customers.searchPlaceholder"),value:$,onChange:e=>{_(e.target.value),E(e=>({...e,currentPage:1}))},prefixIcon:(0,j.jsx)(g.A,{size:16}),className:"mb-0 max-w-sm"})}),z&&(0,j.jsxs)("div",{className:"p-3 m-4 text-sm bg-green-100 text-apple-green rounded-apple flex items-center",children:[(0,j.jsx)(u.A,{size:18,className:"mr-2"}),z]}),C&&(0,j.jsxs)("div",{className:"p-3 m-4 text-sm bg-red-100 text-apple-red rounded-apple flex items-center",children:[(0,j.jsx)(h.A,{size:18,className:"mr-2"}),C]}),(0,j.jsx)("div",{className:"overflow-x-auto",children:k&&0===s.length?(0,j.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,j.jsx)(i.A,{size:"lg"})}):w?(0,j.jsxs)("div",{className:"p-4 text-center text-apple-red bg-red-50 dark:bg-red-900/30 rounded-apple m-4",children:[(0,j.jsx)(h.A,{size:24,className:"mx-auto mb-2"})," ",w,(0,j.jsx)(d.A,{onClick:()=>I($,M.currentPage),variant:"secondary",className:"mt-3 ml-2",isLoading:k,children:e("customers.messages.tryAgain")})]}):0===s.length?(0,j.jsxs)("div",{className:"p-6 text-center text-apple-gray-500 dark:text-apple-gray-400",children:[$?e("customers.messages.noCustomersFound",{searchTerm:$}):e("customers.messages.noCustomersYet"),!$&&(0,j.jsx)("p",{className:"mt-2",children:(0,j.jsx)(r.N_,{to:"/app/customers/new",className:"text-apple-blue hover:underline",children:e("customers.messages.addFirstCustomer")})})]}):(0,j.jsxs)("table",{className:"min-w-full divide-y divide-apple-gray-200 dark:divide-apple-gray-700",children:[(0,j.jsx)("thead",{className:"bg-apple-gray-50 dark:bg-apple-gray-800/50",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"px-4 py-3.5 text-left text-xs font-semibold text-apple-gray-500 dark:text-apple-gray-400 uppercase tracking-wider",children:e("customers.table.name")}),(0,j.jsx)("th",{className:"px-4 py-3.5 text-left text-xs font-semibold text-apple-gray-500 dark:text-apple-gray-400 uppercase tracking-wider",children:e("customers.table.phone")}),(0,j.jsx)("th",{className:"px-4 py-3.5 text-left text-xs font-semibold text-apple-gray-500 dark:text-apple-gray-400 uppercase tracking-wider",children:e("customers.table.email")}),(0,j.jsx)("th",{className:"px-4 py-3.5 text-center text-xs font-semibold text-apple-gray-500 dark:text-apple-gray-400 uppercase tracking-wider",children:e("customers.table.actions")})]})}),(0,j.jsx)("tbody",{className:"divide-y divide-apple-gray-200 dark:divide-apple-gray-700 bg-white dark:bg-apple-gray-900",children:s.map(t=>(0,j.jsxs)("tr",{className:"hover:bg-apple-gray-50/70 dark:hover:bg-apple-gray-800/70 transition-colors duration-150",children:[(0,j.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-apple-gray-800 dark:text-apple-gray-100",children:t.name}),(0,j.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-apple-gray-600 dark:text-apple-gray-300",children:t.phone}),(0,j.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-apple-gray-600 dark:text-apple-gray-300",children:t.email||(0,j.jsx)("span",{className:"italic text-apple-gray-400 dark:text-apple-gray-500",children:"N/A"})}),(0,j.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm font-medium",children:(0,j.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,j.jsx)(r.N_,{to:`/app/customers/${t._id}/details`,className:"p-1.5 rounded-full hover:bg-apple-gray-200 dark:hover:bg-apple-gray-700",title:e("customers.actions.viewDetails"),children:(0,j.jsx)(y.A,{size:18,className:"text-apple-gray-500 hover:text-apple-blue dark:text-apple-gray-400 dark:hover:text-apple-blue-light"})}),(0,j.jsx)(r.N_,{to:`/app/customers/${t._id}/edit`,className:"p-1.5 rounded-full hover:bg-apple-gray-200 dark:hover:bg-apple-gray-700",title:e("customers.actions.editCustomer"),children:(0,j.jsx)(b.A,{size:18,className:"text-apple-gray-500 hover:text-apple-orange dark:text-apple-gray-400 dark:hover:text-orange-400"})}),"admin"===(null===a||void 0===a?void 0:a.role)&&(0,j.jsx)(d.A,{variant:"ghost",size:"sm",onClick:()=>(async(a,t)=>{if(window.confirm(e("customers.messages.deleteConfirm",{customerName:t}))){P(""),S("");try{await(0,c.C9)(a),S(e("customers.messages.deleteSuccess",{customerName:t})),1===s.length&&M.currentPage>1?L(M.currentPage-1):I(T,M.currentPage)}catch(p){var r,l;P((null===(r=p.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||e("customers.messages.deleteFailed",{customerName:t}))}}})(t._id,t.name),className:"p-1.5 text-apple-gray-500 hover:text-apple-red dark:text-apple-gray-400 dark:hover:text-red-400",title:e("customers.actions.deleteCustomer"),children:(0,j.jsx)(v.A,{size:18})})]})})]},t._id))})]})}),!k&&!w&&M.totalPages>1&&(0,j.jsxs)("div",{className:"p-4 border-t border-apple-gray-200 dark:border-apple-gray-700 flex flex-col sm:flex-row justify-between items-center gap-2",children:[(0,j.jsx)("span",{className:"text-sm text-apple-gray-600 dark:text-apple-gray-400",children:e("customers.pagination.pageInfo",{currentPage:M.currentPage,totalPages:M.totalPages,totalCustomers:M.totalCustomers})}),(0,j.jsxs)("div",{className:"flex space-x-2",children:[(0,j.jsx)(d.A,{onClick:()=>L(M.currentPage-1),disabled:1===M.currentPage||k,variant:"secondary",size:"sm",children:e("customers.pagination.previous")}),(0,j.jsx)(d.A,{onClick:()=>L(M.currentPage+1),disabled:M.currentPage>=M.totalPages||k,variant:"secondary",size:"sm",children:e("customers.pagination.next")})]})]})]})]})}}}]);
//# sourceMappingURL=930.94701377.chunk.js.map