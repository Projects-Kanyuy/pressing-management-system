/*! For license information please see 835.15ede336.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[835],{516:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4669:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},6260:(e,a,s)=>{s.d(a,{A:()=>l});s(5043);var t=s(579);const l=e=>{let{children:a,className:s="",title:l,actions:r,titleClassName:i="",contentClassName:p="",actionsClassName:d=""}=e;return(0,t.jsxs)("div",{className:`bg-white dark:bg-apple-gray-900 rounded-apple-lg shadow-apple overflow-hidden ${s}`,children:[l&&(0,t.jsx)("div",{className:`px-4 py-4 sm:px-6 border-b border-apple-gray-200 dark:border-apple-gray-800 ${i}`,children:"string"===typeof l?(0,t.jsx)("h3",{className:"text-lg leading-6 font-semibold text-apple-gray-900 dark:text-apple-gray-100",children:l}):l}),(0,t.jsx)("div",{className:`p-4 sm:p-6 ${p}`,children:a}),r&&(0,t.jsx)("div",{className:`px-4 py-3 sm:px-6 bg-apple-gray-50 dark:bg-apple-gray-950/50 border-t border-apple-gray-200 dark:border-apple-gray-800 ${d}`,children:r})]})}},6835:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var t=s(5043),l=s(4117),r=s(9621),i=s(6260),p=s(722),d=s(7457),n=s(8142),c=s(516),x=s(7719),o=s(4669),m=s(8666),g=s(5180),h=s(579);const y=e=>{var a;let{message:s}=e;return(0,h.jsx)("li",{className:"p-4 border-b border-apple-gray-200 dark:border-apple-gray-700 last:border-b-0 hover:bg-apple-gray-50 dark:hover:bg-apple-gray-800/50 transition-colors",children:(0,h.jsxs)("div",{className:"flex justify-between items-start",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"font-semibold text-apple-gray-800 dark:text-apple-gray-100",children:(null===(a=s.customerId)||void 0===a?void 0:a.name)||s.from.replace("whatsapp:","")}),s.customerId&&(0,h.jsxs)("span",{className:"text-xs text-apple-gray-400 dark:text-apple-gray-500",children:["(",s.from.replace("whatsapp:",""),")"]})]}),(0,h.jsx)("p",{className:"mt-1 text-sm text-apple-gray-700 dark:text-apple-gray-300 whitespace-pre-wrap",children:s.body})]}),(0,h.jsx)("div",{className:"text-right ml-4 flex-shrink-0",children:(0,h.jsx)("p",{className:"text-xs text-apple-gray-500 dark:text-apple-gray-400",title:(0,m.GP)(new Date(s.createdAt),"MMM d, yyyy, h:mm a"),children:(0,g.B)(new Date(s.createdAt),{addSuffix:!0})})})]})})},b=()=>{const{t:e}=(0,l.Bd)(),[a,s]=(0,t.useState)([]),[m,g]=(0,t.useState)({page:1,pages:1,totalMessages:0}),[b,j]=(0,t.useState)(!0),[v,f]=(0,t.useState)(""),u=(0,t.useCallback)(async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;j(!0),f("");try{const{data:e}=await(0,r.wD)(a);s(e.messages||[]),g({page:e.page,pages:e.pages,totalMessages:e.totalMessages})}catch(i){var t,l;f((null===(t=i.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||e("inbox.error")),console.error("Fetch Inbox Error:",i)}finally{j(!1)}},[]);return(0,t.useEffect)(()=>{u(1)},[u]),(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)(n.A,{size:28,className:"text-apple-blue"}),(0,h.jsx)("h1",{className:"text-2xl sm:text-3xl font-semibold",children:e("inbox.title")})]}),(0,h.jsx)(p.A,{variant:"secondary",onClick:()=>u(m.page),isLoading:b,iconLeft:(0,h.jsx)(c.A,{size:16}),children:e("inbox.refresh")})]}),v&&(0,h.jsxs)("div",{className:"p-3 my-4 text-sm bg-red-100 text-apple-red rounded-apple flex items-center",children:[(0,h.jsx)(x.A,{size:18,className:"mr-2"}),v]}),(0,h.jsxs)(i.A,{contentClassName:"p-0",children:[b&&0===a.length?(0,h.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,h.jsx)(d.A,{size:"lg"})}):0===a.length?(0,h.jsxs)("div",{className:"p-8 text-center text-apple-gray-500 dark:text-apple-gray-400",children:[(0,h.jsx)(o.A,{size:48,className:"mx-auto mb-4"}),(0,h.jsx)("h3",{className:"font-semibold text-lg",children:e("inbox.emptyTitle")}),(0,h.jsx)("p",{className:"text-sm mt-1",children:e("inbox.emptyDescription")})]}):(0,h.jsx)("ul",{children:a.map(e=>(0,h.jsx)(y,{message:e},e._id))}),m.pages>1&&(0,h.jsxs)("div",{className:"p-4 border-t border-apple-gray-200 dark:border-apple-gray-700 flex justify-between items-center text-sm",children:[(0,h.jsx)("span",{children:e("inbox.pagination.pageInfo",{currentPage:m.page,totalPages:m.pages,totalMessages:m.totalMessages})}),(0,h.jsxs)("div",{className:"space-x-2",children:[(0,h.jsx)(p.A,{onClick:()=>u(m.page-1),disabled:m.page<=1||b,variant:"secondary",size:"sm",children:e("inbox.pagination.previous")}),(0,h.jsx)(p.A,{onClick:()=>u(m.page+1),disabled:m.page>=m.pages||b,variant:"secondary",size:"sm",children:e("inbox.pagination.next")})]})]})]})]})}}}]);
//# sourceMappingURL=835.15ede336.chunk.js.map